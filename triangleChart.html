<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Triangle Chart</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script> <!-- Chart.js Datalabels Plugin -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      
#triangleChart {
    display: block;
    max-width: 100%;
    max-height: 100%; 

}
    </style>
</head>
<body>
    <canvas id="triangleChart"></canvas> 

<script>



document.addEventListener('DOMContentLoaded', function() {

const triangleChartCtx = document.getElementById('triangleChart').getContext('2d');
const triangleChart = new Chart(triangleChartCtx, {
    type: 'radar',
    data: {
        labels: ['Ages 13-34', 'Ages 35-49', 'Age 50+'], // Age groups as the axes of the radar
        datasets: [
       
            {
                label: 'Trans',
                data: [11, 8, 8], // Hypothetical data for Trans across the 3 age groups
                backgroundColor: 'rgba(242, 105, 95, 0.2)',
                borderColor: 'rgba(242, 105, 95, 1)',
                pointBackgroundColor: 'rgba(242, 105, 95, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(242, 105, 95, 1)'
            },
            {
                label: 'Non-binary, other or multiple',
                data: [45, 21, 7], // Hypothetical data for Other or multiple gender identities across the 3 age groups
                backgroundColor: 'rgba(35, 153, 181, 0.2)',
                borderColor: 'rgba(35, 153, 181, 1)',
                pointBackgroundColor: 'rgba(35, 153, 181, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(35, 153, 181, 1)'
            },
            {
                label: 'Straight, Gay, or Lesbian',
                data: [29, 48, 76], // Hypothetical data for Straight, Gay, or Lesbian across the 3 age groups
                backgroundColor: 'rgba(126, 188, 100, 0.2)',
                borderColor: 'rgba(126, 188, 100, 1)',
                pointBackgroundColor: 'rgba(126, 188, 100, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(126, 188, 100, 1)'
            },
            {
                label: 'Bisexual, pansexual, queer, other',
                data: [71, 52, 24], // Hypothetical data for Bisexual, pansexual, queer, other across the 3 age groups
                backgroundColor: 'rgba(153, 102, 255, 0.2)',
                borderColor: 'rgba(153, 102, 255, 1)',
                pointBackgroundColor: 'rgba(153, 102, 255, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(153, 102, 255, 1)'
            },
            {
                label: 'Cisgender',
                data: [44, 72, 85], // Hypothetical data for Cisgender across the 3 age groups
                backgroundColor: 'rgba(258, 206, 67, 0.2)',
                borderColor: 'rgba(258, 206, 67, 0.5)',
                pointBackgroundColor: 'rgba(258, 206, 67, 0.2)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(258, 206, 67, 0.2)'
            }
        ]
    },
    options: {
        responsive: true, // The chart will grow to fill the container
        maintainAspectRatio: false, // The chart will not maintain the aspect ratio
        layout: {
      
            padding: 0,
        },
        scales: {
            r: {
                ticks: {
                    // Adjust the font of the radial axis ticks (labels)
                    display: true,
                    font: {
                        size: 10, // Sets the font size
                        family: 'Arial', // Sets the font family
                    }
                },
                angleLines: {
                    display: false
                },
                grid: {
                    circular: true
                }, 
                suggestedMin: 0,
                suggestedMax: 100,
                pointLabels: {
                    // This is where you adjust the font for the point labels around the radar
                    font: {
                        size: 14, // Set the font size for the point labels
                        family: 'Arial' // Set the font family for the point labels
                    }, 
                }
            }
        },
        plugins: {
            legend: {
        position: 'bottom', // Ensures the legend is at the bottom
        labels: {
            boxWidth: 2, // Width of the color box accompanying the legend text
            boxHeight: 2,
            padding: 5,  // Space between each legend item
            font: {
                size: 12,  // Set the font size to 14px
                family: 'Arial', // Optional: Specify the font family
                style: 'normal', // Optional: Specify the font style
                weight: 'normal' // Optional: Specify the font weight
            }
        },
        align: 'center', // Aligns the legend items to the start (left if position is top or bottom)
        maxHeight: 50, // Adjust based on your specific needs
    },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        let label = context.dataset.label || '';
                        if (label) {
                            label += ': ';
                        }
                        const value = context.raw;
                        label += value + '%'; // Append a '%' sign to each value
                        return label;
                    }
                }
            },

        
            
            
        },
        elements: {
            line: {
                borderWidth: 3
            }
        }
    }
});

});

function resizeCanvas() {
    var canvas = document.getElementById('triangleChart');
    if (!canvas) return;
    // Set the dimensions explicitly, avoiding continuous growth or zero dimensions
    canvas.width = document.getElementById('column2').offsetWidth;
    canvas.height = Math.min(window.innerHeight * 0.75, 400);  // Limiting height to avoid it becoming too large
    // Re-instantiate the chart or update its size here if necessary
}

// Ensure resize logic is called on appropriate events
window.addEventListener('resize', resizeCanvas);
window.addEventListener('DOMContentLoaded', resizeCanvas);


</script>
</body>
</html>
